window.__require=function e(t,i,o){function n(c,a){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var d=i[c]={exports:{}};t[c][0].call(d.exports,function(e){return n(t[c][1][e]||e)},d,d.exports,e,t,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({Audio:[function(e,t){"use strict";cc._RF.push(t,"fe886wfYlpEcq7BoWO0k3qv","Audio"),cc.Class({extends:cc.Component,properties:{bgmAudioID:-1,sfxAudioID:-1},ctor:function(){},init:function(){},getUrl:function(e){return"audio/"+e},playBGM:function(){this.bgmAudioID>=0&&this.stopBGM();var e=this;cc.loader.loadRes("audio/stage-main-theme",cc.AudioClip,function(t,i){e.bgmAudioID=cc.audioEngine.playMusic(i,!0),XX.Tools.userData.Music||e.pauseAllMusic()})},stopBGM:function(){cc.audioEngine.stopMusic(),this.bgmAudioID=-1},playSFX:function(e){if(XX.Tools.userData.Audio){var t=this.getUrl(e),i=this;cc.loader.loadRes(t,cc.AudioClip,function(e,t){i.sfxAudioID=cc.audioEngine.playEffect(t,!1),cc.audioEngine.setFinishCallback(i.sfxAudioID,i.sfxFinishCallBack)})}},sfxFinishCallBack:function(){},pauseAllMusic:function(){cc.audioEngine.setMusicVolume(0)},resumeAllMusic:function(){cc.audioEngine.setMusicVolume(1)},stopAllMusic:function(){this.resumeAllMusic(),cc.audioEngine.stopMusic()},pauseAll:function(){cc.audioEngine.pauseAllEffects()},resumeAll:function(){cc.audioEngine.resumeAllEffects()},stopAll:function(){cc.audioEngine.stopAllEffects()},playIntro:function(){this.playSFX("intro")},playLevelStart:function(){cc.audioEngine.stop(this.sfxAudioID),this.playSFX("level-start")},playPutBomb:function(){this.playSFX("put-bomb")},playBomb:function(){this.playSFX("boom")},playGameOver:function(){this.playSFX("game-over")},playUpAndDown:function(){this.playSFX("up-down")},playLeftAndRight:function(){this.playSFX("left-right")},playJustDied:function(){this.playSFX("just-died")},playMosterDead:function(){this.playSFX("monsterDead")},playAllDieAndPause:function(){this.playSFX("alldiedandpuse")},playFindDoor:function(){this.playSFX("stage-main-theme-find-the-door")},playEatProp:function(){this.playSFX("eatprop")},playGameBGM:function(){this.playBGM()},stopGameBGM:function(){this.stopBGM()}}),cc._RF.pop()},{}],ColliderEnum:[function(e,t,i){"use strict";cc._RF.push(t,"7a70fk0SblD8bKy/iLQHfs6","ColliderEnum"),i.__esModule=!0,i.default=void 0;var o=cc.Enum({Player:1e3,Wall:1001,Steel:1002,Bomb:1003,Blast:1005,Monster:1004,Item:1006});i.default=o,t.exports=i.default,cc._RF.pop()},{}],Config:[function(e,t){"use strict";cc._RF.push(t,"c3a39AZG71IR6lKFe3xKn8B","Config");var i=function(){};i.windowSize=cc.winSize,i.videoState=0,i.videoRecordingState=0,i.video_recorder=null,i.videoStartTime=null,i.videoPath=null,i.videoIsExist=1,i.shareVideoState=0,i.shareVideoTips=0,i.videoAd=null,i.operateTYpe=-1,t.exports=i,cc._RF.pop()},{}],ConstantVar:[function(e,t){"use strict";cc._RF.push(t,"9f3e9ALNJ5EkKKGNB4r0FTj","ConstantVar"),t.exports={VideoRecoder:null,VideoStartTime:null,VideoPath:null,VideoAd:null,BannerAd:null},cc._RF.pop()},{}],Constant:[function(e,t){"use strict";cc._RF.push(t,"8c4ffjMW1hHJoHt97wEWczy","Constant"),cc.Class({extends:cc.Component,ctor:function(){this.Event={score:1,live:2}}}),cc._RF.pop()},{}],Enum:[function(e,t){"use strict";cc._RF.push(t,"d58bdhZMrlGOpHty+WgpWxu","Enum"),t.exports.ccPlatformType=cc.Enum({"\u5b57\u8282\u8df3\u52a8":0,"\u5fae\u4fe1":1,QQ:2}),t.exports.ccVideoRecordState=cc.Enum({"\u5f00\u59cb\u5f55\u5c4f":0,"\u7ed3\u675f\u5f55\u5c4f":1,"\u5206\u4eab\u5f55\u5c4f":2}),t.exports.ccShareRecordVideoState=cc.Enum({"\u53ef\u4ee5\u5206\u4eab":0,"\u5206\u4eab\u6210\u529f":1,"\u5206\u4eab\u5931\u8d25":2}),t.exports.ccBannerPos=cc.Enum({"\u5de6\u4e0a\u89d2":0,"\u53f3\u4e0a\u89d2":1,"\u4e0a\u90e8\u5c45\u4e2d":2,"\u5de6\u4e0b\u89d2":4,"\u53f3\u4e0b\u89d2":5,"\u5e95\u90e8\u5c45\u4e2d":6}),t.exports.ccAnaEventType=cc.Enum({Start:0,Completed:1,Cancel:2,Failed:3}),cc._RF.pop()},{}],Event:[function(e,t){"use strict";cc._RF.push(t,"1577fxOLaVF3qdmClGmkj5e","Event"),cc.Class({extends:cc.Component,ctor:function(){this.eventPool=[],this.callPool=[],this.targetPool=[],this.node=cc.director.getScene().getChildByName("PersistRootNode")},on:function(e,t,i){this.eventPool.push(e),this.callPool.push(t),this.targetPool.push(i),this.node.on(e,t,i)},off:function(e){this.node.off(e,this.callPool[this.eventPool.indexOf(e)]),this.callPool.splice(this.eventPool.indexOf(e),1),this.targetPool.splice(this.eventPool.indexOf(e),1),this.eventPool.splice(this.eventPool.indexOf(e),1)},offAll:function(){for(var e=this.eventPool,t=0;t<e.length;t++)this.off(e[t]);this.eventPool.splice(0,this.eventPool.length),this.callPool.splice(0,this.callPool.length),this.targetPool.splice(0,this.callPool.length)},emit:function(e,t){this.node.emit(e,t)}}),cc._RF.pop()},{}],ItemEnum:[function(e,t,i){"use strict";cc._RF.push(t,"2d82336g+FDfbdKdueZ3zko","ItemEnum"),i.__esModule=!0,i.default=void 0;var o=cc.Enum({RunShoes:1,BombRange:2,BombCount:3,BombThough:4,NonExploded:5,BombRemote:6,WallThough:7,Invincible:8});i.default=o,t.exports=i.default,cc._RF.pop()},{}],Manager:[function(e,t,i){"use strict";cc._RF.push(t,"e93ce1ObUJNvrTQyFYLMabM","Manager"),i.__esModule=!0,i.ccManager=void 0;var o=e("./Enum"),n=e("./ConstantVar"),s={CloseAPI:!1,PlatformType:o.ccPlatformType.\u5b57\u8282\u8df3\u52a8,VideoTitle:"\u5f55\u5c4f\u89c6\u9891\u6807\u9898",VideoImgUrl:"\u5f55\u5c4f\u89c6\u9891\u56fe\u7247ID",RewardVideoAdsID:"",InterstitialAdsID:"",BannerAdID:"",VideoTopics:[],RecordTime:60,initData:function(){this.initVideo(),this.RewardSuccess=function(){},this.RewardFailed=function(){},this.RewardVideoInit()},isAndroid:function(){return console.log(cc.sys.os,cc.sys.platform),cc.sys.platform==cc.sys.WECHAT_GAME},Analytics:function(e,t,i){switch(e){case o.ccAnaEventType.Start:cocosAnalytics.CACustomEvent.onStarted(t,{name:i});break;case o.ccAnaEventType.Completed:cocosAnalytics.CACustomEvent.onSuccess(t,{name:i});break;case o.ccAnaEventType.Cancel:cocosAnalytics.CACustomEvent.onCancelled(t,{name:i});break;case o.ccAnaEventType.Failed:cocosAnalytics.CACustomEvent.onFailed(t,{name:i})}},initVideo:function(){if(!this.CloseAPI&&this.isAndroid())switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:n.VideoRecoder=tt.getGameRecorderManager();break;case o.ccPlatformType.\u5fae\u4fe1:n.VideoRecoder=wx.getGameRecorderManager();break;case o.ccPlatformType.QQ:}},RecordStart:function(){if(!this.CloseAPI&&this.isAndroid())switch(console.log("\u5f55\u5236\u89c6\u9891\u5f00\u59cb"),this.Analytics(o.ccAnaEventType.Start,"\u5f55\u5c4f","\u5f55\u5c4f\u5f00\u59cb"),n.VideoStartTime=Date.parse(new Date),this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:n.VideoRecoder.onStart(function(e){console.log("\u5f00\u59cb\u5f55\u5236...",e)}),n.VideoRecoder.start({duration:this.RecordTime}),n.VideoRecoder.onStop(function(e){console.log("\u5f55\u5c4f\u505c\u6b62",e,e.videoPath),n.VideoPath=e.videoPath}),n.VideoRecoder.onError(function(){console.log("\u5f55\u5c4f\u53d1\u751f\u9519\u8bef")});break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}},RecordEnd:function(){if(!this.CloseAPI&&this.isAndroid())switch(console.log("\u5f55\u5236\u89c6\u9891\u7ed3\u675f"),this.Analytics(o.ccAnaEventType.Completed,"\u5f55\u5c4f","\u5f55\u5c4f\u7ed3\u675f"),this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:n.VideoRecoder&&(Date.parse(new Date),n.VideoStartTime,n.VideoRecoder.stop());break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}},ShareRecord:function(e){if(!this.CloseAPI&&this.isAndroid()){console.log("\u5206\u4eab\u89c6\u9891"),this.Analytics(o.ccAnaEventType.Start,"\u5f55\u5c4f","\u5206\u4eab\u5f55\u5c4f");var t=this;switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:tt.shareAppMessage({channel:"video",title:this.VideoTitle,imageUrl:this.VideoImgUrl,query:"",extra:{videoPath:n.VideoPath,videoTopics:this.VideoTopics,createChallenge:!0},success:function(){console.log("\u5206\u4eab\u5f55\u5c4f\u89c6\u9891\u6210\u529f"),t.Analytics(o.ccAnaEventType.Completed,"\u5f55\u5c4f","\u5206\u4eab\u5f55\u5c4f\u6210\u529f"),e()},fail:function(){console.log("\u5206\u4eab\u5f55\u5c4f\u89c6\u9891\u5931\u8d25"),t.Analytics(o.ccAnaEventType.Failed,"\u5f55\u5c4f","\u5206\u4eab\u5f55\u5c4f\u5931\u8d25")}});break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}}else e()},Share:function(){if(!this.CloseAPI&&this.isAndroid())switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:tt.shareAppMessage(function(){return{title:this.VideoTitle,imageUrlId:this.VideoImgUrl,success:function(e){console.log(e)},fail:function(e){console.log(e)}}});break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}},RewardVideoInit:function(){if(!this.CloseAPI&&this.isAndroid()&&!n.VideoAd){this.Analytics(o.ccAnaEventType.Start,"\u6fc0\u52b1\u89c6\u9891","\u521d\u59cb\u5316\u6fc0\u52b1\u89c6\u9891");var e=this;n.VideoAd=tt.createRewardedVideoAd({adUnitId:this.RewardVideoAdsID}),console.log(n.VideoAd),n.VideoAd.onClose(function(t){t.isEnded?(console.log("\u89c6\u9891\u5e7f\u544a\u7ed3\u675f\u56de\u8c03"),e.Analytics(o.ccAnaEventType.Completed,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u5956\u52b1\u6210\u529f"),e.RewardSuccess()):(e.RewardFailed(),e.Analytics(o.ccAnaEventType.Completed,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u5956\u52b1\u5931\u8d25"))})}},RewardVideoShow:function(e,t){if(!this.CloseAPI&&this.isAndroid()){this.RewardSuccess=e,this.RewardFailed=t;var i=this;this.Analytics(o.ccAnaEventType.Start,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u5f00\u59cb\u663e\u793a"),this.RewardVideoInit(),n.VideoAd.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f"),i.Analytics(o.ccAnaEventType.Completed,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u663e\u793a\u6210\u529f")}).catch(function(){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898"),i.Analytics(o.ccAnaEventType.Failed,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898"),n.VideoAd.load().then(function(){return console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),i.Analytics(o.ccAnaEventType.Completed,"\u6fc0\u52b1\u89c6\u9891","\u6fc0\u52b1\u89c6\u9891\u518d\u6b21\u52a0\u8f7d\u6210\u529f"),n.VideoAd.show()})})}else e()},InterstitialAdShow:function(){if(!this.CloseAPI&&this.isAndroid()){this.Analytics(o.ccAnaEventType.Start,"\u63d2\u5c4f\u5e7f\u544a","\u663e\u793a\u63d2\u5c4f\u5e7f\u544a");var e=this;switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:var t=tt.createInterstitialAd({adUnitId:this.InterstitialAdsID});t.onClose(function(){e.Analytics(o.ccAnaEventType.Cancel,"\u63d2\u5c4f\u5e7f\u544a","\u5173\u95ed\u63d2\u5c4f\u5e7f\u544a"),t.destroy()}),t.load().then(function(){e.Analytics(o.ccAnaEventType.Completed,"\u63d2\u5c4f\u5e7f\u544a","\u52a0\u8f7d\u63d2\u5c4f\u5e7f\u544a\u5b8c\u6210"),t.show()}).catch(function(i){e.Analytics(o.ccAnaEventType.Failed,"\u63d2\u5c4f\u5e7f\u544a","\u52a0\u8f7d\u63d2\u5c4f\u5e7f\u544a\u51fa\u73b0\u9519\u8bef"),console.log(i),t.destroy()});break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}}},showToast:function(e){if(!this.CloseAPI&&this.isAndroid())switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:tt.showToast({title:e,success:function(){}});break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}},showBanner:function(e,t,i,s){if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=o.ccBannerPos.\u5e95\u90e8\u5c45\u4e2d),void 0===s&&(s=.25),!this.CloseAPI&&this.isAndroid()){var c=this;switch(this.PlatformType){case o.ccPlatformType.\u5b57\u8282\u8df3\u52a8:var a=function(){var e=tt.getSystemInfoSync(),t=e.windowWidth,c=(e.windowHeight,cc.winSize.width*s);switch(console.log("\u76ee\u6807\u5bbd\u5ea6",c),i){case o.ccBannerPos.\u5de6\u4e0b\u89d2:case o.ccBannerPos.\u5de6\u4e0a\u89d2:n.BannerAd.style.left=0;break;case o.ccBannerPos.\u53f3\u4e0b\u89d2:case o.ccBannerPos.\u53f3\u4e0a\u89d2:n.BannerAd.style.left=t-c;break;case o.ccBannerPos.\u5e95\u90e8\u5c45\u4e2d:case o.ccBannerPos.\u4e0a\u90e8\u5c45\u4e2d:n.BannerAd.style.left=(t-c)/2}};if(e){c.Analytics(o.ccAnaEventType.Start,"Banner\u5e7f\u544a","\u5f00\u59cb\u52a0\u8f7d\u5e76\u663e\u793aBanner\u5e7f\u544a(ReSize)"),n.BannerAd&&(c.Analytics(o.ccAnaEventType.Cancel,"Banner\u5e7f\u544a","\u9500\u6bc1Banner\u5e7f\u544a"),n.BannerAd.destroy(),n.BannerAd=null);var r=tt.getSystemInfoSync(),l=r.windowWidth,d=r.windowHeight,h=cc.winSize.width*s;n.BannerAd=tt.createBannerAd({adUnitId:this.BannerAdID,adIntervals:30,style:{top:d-h/16*3,width:h}}),n.BannerAd.onResize(function(e){switch(i){case o.ccBannerPos.\u5de6\u4e0b\u89d2:n.BannerAd.style.top=d-e.height,n.BannerAd.style.left=0;break;case o.ccBannerPos.\u5de6\u4e0a\u89d2:n.BannerAd.style.top=0,n.BannerAd.style.left=0;break;case o.ccBannerPos.\u53f3\u4e0b\u89d2:n.BannerAd.style.top=d-e.height,n.BannerAd.style.left=l-e.width;break;case o.ccBannerPos.\u53f3\u4e0a\u89d2:n.BannerAd.style.top=0,n.BannerAd.style.left=l-e.width;break;case o.ccBannerPos.\u5e95\u90e8\u5c45\u4e2d:n.BannerAd.style.top=d-e.height,n.BannerAd.style.left=(l-e.width)/2;break;case o.ccBannerPos.\u4e0a\u90e8\u5c45\u4e2d:n.BannerAd.style.top=0,n.BannerAd.style.left=(l-e.width)/2}}),a(),n.BannerAd.onLoad(function(){n.BannerAd.show().then(function(){c.Analytics(o.ccAnaEventType.Completed,"Banner\u5e7f\u544a","\u663e\u793aBanner\u5e7f\u544a\u5b8c\u6210"),t&&n.BannerAd.hide()}).catch(function(){c.Analytics(o.ccAnaEventType.Failed,"Banner\u5e7f\u544a","\u663e\u793aBanner\u5e7f\u544a\u5931\u8d25")})})}else if(c.Analytics(o.ccAnaEventType.Start,"Banner\u5e7f\u544a","\u5f00\u59cb\u52a0\u8f7d\u5e76\u663e\u793aBanner\u5e7f\u544a"),n.BannerAd)a(),t||n.BannerAd.show();else{var u=tt.getSystemInfoSync(),p=u.windowWidth,m=u.windowHeight;h=cc.winSize.width*s,n.BannerAd=tt.createBannerAd({adUnitId:this.BannerAdID,adIntervals:30,style:{top:m-h/16*3,width:h}}),n.BannerAd.onResize(function(e){switch(i){case o.ccBannerPos.\u5de6\u4e0b\u89d2:n.BannerAd.style.top=m-e.height,n.BannerAd.style.left=0;break;case o.ccBannerPos.\u5de6\u4e0a\u89d2:n.BannerAd.style.top=0,n.BannerAd.style.left=0;break;case o.ccBannerPos.\u53f3\u4e0b\u89d2:n.BannerAd.style.top=m-e.height,n.BannerAd.style.left=p-e.width;break;case o.ccBannerPos.\u53f3\u4e0a\u89d2:n.BannerAd.style.top=0,n.BannerAd.style.left=p-e.width;break;case o.ccBannerPos.\u5e95\u90e8\u5c45\u4e2d:n.BannerAd.style.top=m-e.height,n.BannerAd.style.left=(p-e.width)/2;break;case o.ccBannerPos.\u4e0a\u90e8\u5c45\u4e2d:n.BannerAd.style.top=0,n.BannerAd.style.left=(p-e.width)/2}}),a(),n.BannerAd.onLoad(function(){n.BannerAd.show().then(function(){c.Analytics(o.ccAnaEventType.Completed,"Banner\u5e7f\u544a","\u663e\u793aBanner\u5e7f\u544a\u5b8c\u6210"),t&&n.BannerAd.hide()}).catch(function(){c.Analytics(o.ccAnaEventType.Failed,"Banner\u5e7f\u544a","\u663e\u793aBanner\u5e7f\u544a\u5931\u8d25")})})}break;case o.ccPlatformType.\u5fae\u4fe1:case o.ccPlatformType.QQ:}}},hideBanner:function(){!this.CloseAPI&&this.isAndroid()&&n.BannerAd&&(this.Analytics(o.ccAnaEventType.Completed,"Banner\u5e7f\u544a","\u9690\u85cfBanner\u5e7f\u544a\u5b8c\u6210"),n.BannerAd.hide())}};i.ccManager=s,cc._RF.pop()},{"./ConstantVar":"ConstantVar","./Enum":"Enum"}],ObjectOrder:[function(e,t,i){"use strict";cc._RF.push(t,"7c70eVJSydAiISe/Da0LsNz","ObjectOrder"),i.__esModule=!0,i.default=void 0;var o=cc.Enum({Fire:5,Wall:6,Item:4,Door:3,Player:7,Monster:8});i.default=o,t.exports=i.default,cc._RF.pop()},{}],PersistRootNode:[function(e,t){"use strict";cc._RF.push(t,"eef6bCs0GhOopppfM3oFrjc","PersistRootNode");var i=e("../sdk/Manager"),o=e("../sdk/Enum");cc.Class({extends:cc.Component,properties:{tip_prefab:cc.Prefab,CloseAPI:{default:!1,displayName:"\u5173\u95edAPI\u7ba1\u7406"},PlatformType:{type:cc.Enum(o.ccPlatformType),default:o.ccPlatformType.\u5b57\u8282\u8df3\u52a8,displayName:"\u53d1\u5e03\u5e73\u53f0",visible:function(){return!this.CloseAPI}},VideoTitle:{default:"\u5f55\u5c4f\u89c6\u9891\u6807\u9898",displayName:"\u5f55\u5c4f\u89c6\u9891\u5206\u4eab\u6807\u9898",visible:function(){return!this.CloseAPI}},VideoImgUrl:{default:"",displayName:"\u5f55\u5c4f\u89c6\u9891\u5206\u4eab\u754c\u9762\u56fe\u7247ID",visible:function(){return!this.CloseAPI}},VideoTopics:{type:[cc.String],default:[],displayName:"\u5f55\u5c4f\u5206\u4eab\u5173\u952e\u5b57",visible:function(){return!this.CloseAPI}},RecordTime:{type:cc.Float,slide:!0,range:[15,120],default:15,step:1,displayName:"\u5f55\u5c4f\u65f6\u95f4",visible:function(){return!this.CloseAPI}},RewardVideoAdsID:{default:"",displayName:"\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u4f4dID",visible:function(){return!this.CloseAPI}},InterstitialAdsID:{default:"",displayName:"\u63d2\u5c4f\u5e7f\u544a\u4f4dID",visible:function(){return!this.CloseAPI}},BannerAdID:{default:"",displayName:"Banner\u5e7f\u544a\u4f4dID",visible:function(){return!this.CloseAPI}}},start:function(){var t=this;i.ccManager.CloseAPI=this.CloseAPI,i.ccManager.PlatformType=this.PlatformType,i.ccManager.VideoTitle=this.VideoTitle,i.ccManager.VideoImgUrl=this.VideoImgUrl,i.ccManager.RewardVideoAdsID=this.RewardVideoAdsID,i.ccManager.InterstitialAdsID=this.InterstitialAdsID,i.ccManager.BannerAdID=this.BannerAdID,i.ccManager.VideoTopics=this.VideoTopics,i.ccManager.RecordTime=this.RecordTime,i.ccManager.initData(),cc.game.addPersistRootNode(this.node),cc.director.getScene().getChildByName("PersistRootNode"),window.XX={},window.xx={};var o=e("Tools"),n=e("UserInfo"),s=e("Audio"),c=e("QQ"),a=e("WeChat"),r=e("Event"),l=e("Constant");XX.Tools=new o,XX.UserInfo=new n,XX.Audio=new s,XX.QQ=new c,XX.WeChat=new a,XX.Event=new r,XX.Constant=new l,XX.Tip=function(e){var i=cc.find("Canvas/Tip");i.zIndex=10;var o=cc.instantiate(t.tip_prefab);i.addChild(o),o.zIndex=10,o.getComponent("tip").showToast(e)}}}),cc._RF.pop()},{"../sdk/Enum":"Enum","../sdk/Manager":"Manager",Audio:"Audio",Constant:"Constant",Event:"Event",QQ:"QQ",Tools:"Tools",UserInfo:"UserInfo",WeChat:"WeChat"}],PolygonMask:[function(e,t,i){"use strict";cc._RF.push(t,"fa5b14lkKZJF5OJv8l5AFbX","PolygonMask"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc.gfx,n=cc._decorator,s=n.ccclass,c=n.property,a=n.executeInEditMode,r=n.requireComponent,l=[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._editing=!1,t._offset=cc.v2(0,0),t._spriteFrame=null,t._vertexes=l,t._meshCache=null,t.renderer=null,t.mesh=null,t.texture=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"editing",{get:function(){return this._editing},set:function(e){this._editing=e,this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e,this.editing&&this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vertexes",{get:function(){return this._vertexes},set:function(e){this._vertexes=e,this._updateMesh(),this.editing&&this._applyVertexes()},enumerable:!1,configurable:!0}),t.prototype.start=function(){this._meshCache={},this._updateMesh();var e=this.node.getComponent(cc.MeshRenderer);e.mesh=null,this.renderer=e;var t=cc.MaterialVariant.createWithBuiltin("unlit",this).material;e.setMaterial(0,t),this._applySpriteFrame(),this._applyVertexes()},t.prototype._updateMesh=function(){var e=this._meshCache[this.vertexes.length];e||((e=new cc.Mesh).init(new o.VertexFormat([{name:o.ATTR_POSITION,type:o.ATTR_TYPE_FLOAT32,num:2},{name:o.ATTR_UV0,type:o.ATTR_TYPE_FLOAT32,num:2}]),this.vertexes.length,!0),this._meshCache[this.vertexes.length]=e),this.mesh=e},t.prototype._applyVertexes=function(){var e=this,t=this.mesh,i=this.vertexes.map(function(t){return t.add(e.offset)});if(t.setVertices(o.ATTR_POSITION,i),this.texture){for(var n=[],s=0,c=i;s<c.length;s++){var a=c[s],r=(a.x+this.texture.width/2)/this.texture.width,l=1-(a.y+this.texture.height/2)/this.texture.height;n.push(cc.v2(r,l))}t.setVertices(o.ATTR_UV0,n)}if(this.vertexes.length>=3){for(var d=[],h=[].concat(i),u=0,p=-1;h.length>3;){var m=h[u%h.length],g=h[(u+1)%h.length],f=h[(u+2)%h.length],v=g.sub(m),y=f.sub(g);if(v.cross(y)>=0){for(var b=!1,x=0,_=h;x<_.length;x++){var C=_[x];if(C!==m&&C!==g&&C!==f&&this._testInTriangle(C,m,g,f)){b=!0;break}}if(b){if((u=(u+1)%h.length)===p){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}}else d=d.concat([i.indexOf(m),i.indexOf(g),i.indexOf(f)]),h.splice(h.indexOf(g),1),p=u}else if((u=(u+1)%h.length)===p){cc.log("\u5faa\u73af\u4e00\u5708\u672a\u53d1\u73b0");break}}d=d.concat(h.map(function(e){return i.indexOf(e)})),t.setIndices(d),this.renderer.mesh!=t&&(this.renderer.mesh=t)}},t.prototype._testInTriangle=function(e,t,i,o){var n=i.sub(t),s=o.sub(t),c=o.sub(i),a=e.sub(t),r=e.sub(i);return n.cross(s)>=0!=n.cross(a)<0&&n.cross(s)>=0!=s.cross(a)>=0&&c.cross(n)>0!=c.cross(r)>=0},t.prototype._applySpriteFrame=function(){if(this.spriteFrame){var e=this.renderer.getMaterial(0),t=this.spriteFrame.getTexture();e.define("USE_DIFFUSE_TEXTURE",!0),e.setProperty("diffuseTexture",t),this.texture=t}},__decorate([c({serializable:!1,readonly:!0})],t.prototype,"_editing",void 0),__decorate([c],t.prototype,"editing",null),__decorate([c],t.prototype,"_offset",void 0),__decorate([c],t.prototype,"offset",null),__decorate([c({type:cc.SpriteFrame})],t.prototype,"_spriteFrame",void 0),__decorate([c({type:cc.SpriteFrame})],t.prototype,"spriteFrame",null),__decorate([c({type:cc.Vec2})],t.prototype,"_vertexes",void 0),__decorate([c({type:cc.Vec2})],t.prototype,"vertexes",null),__decorate([s,a,r(cc.MeshRenderer)],t)}(cc.Component);i.default=d,cc._RF.pop()},{}],QQ:[function(e,t){"use strict";cc._RF.push(t,"27343bEKtxKYLmFkAX8gUEa","QQ"),cc.Class({extends:cc.Component,ctor:function(){}}),cc._RF.pop()},{}],Test:[function(e,t){"use strict";cc._RF.push(t,"ff8c85qPkJHOJgTtl5YsCo+","Test"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(){}}),cc._RF.pop()},{}],Tools:[function(e,t){"use strict";cc._RF.push(t,"14349Hqfr1BYI8YAG1eZHzX","Tools"),cc.Class({extends:cc.Component,ctor:function(){this.userData={SpeedCount:0,BombCount:0,StrengthCount:0,Music:!0,Audio:!0,Year:0,Month:0,Day:0,Daily:!1,isGo:!1}},Get:function(e,t,i){for(var o in e+="?",t)e+=o+"="+t[o]+"&";console.log(e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<400){var e=n.responseText;if(e){var t=JSON.parse(e);i(t)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),i(!1)}else console.log("\u8bf7\u6c42\u5931\u8d25"),i(!1)},n.open("GET",e,!0),n.send()},Post:function(e,t,i){var o="";for(var n in t)o+=n+"="+t[n]+"&";var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState)if(s.status>=200&&s.status<400){var e=s.responseText;if(e){var t=JSON.parse(e);i(t)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),i(!1)}else console.log("\u8bf7\u6c42\u5931\u8d25"),i(!1)},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o)},GUID:function(e,t){var i,o,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||n.length,e)for(i=0;i<e;i++)s[i]=n[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",i=0;i<36;i++)s[i]||(o=0|16*Math.random(),s[i]=n[19==i?3&o|8:o]);return s.join("")},RandomSort:function(e){return e.sort(function(){return Math.random()>.5?-1:1})},IsNumber:function(e){return e===+e},Random:function(e,t){return e+Math.floor(Math.random()*Math.abs(t-e))},RandomOne:function(e){return e&&0!=e.length?e[Tools.Random(0,e.length)]:null},randomInt:function(e,t){var i=t-e;return e+Math.floor(Math.random()*(i+1))},loadData:function(e){return new Promise(function(t,i){cc.loader.loadRes(e,function(e,o){e?i(e):t(o)})})},saveData:function(e,t){cc.sys.localStorage.setItem(e,t)},getData:function(e){return cc.sys.localStorage.getItem(e)},removeData:function(e){cc.sys.localStorage.removeItem(e)},getUserData:function(){var e=this.getData("appData");return console.log("\u83b7\u53d6\u7684\u503c:",e),null==e||""==e?this.saveUserData():(this.userData=JSON.parse(e),console.log("\u5b58\u50a8\u7684\u6570\u636e this.userData :",this.userData)),this.userData},saveUserData:function(){console.log("\u5b58\u50a8--\x3e",JSON.stringify(this.userData)),this.saveData("appData",JSON.stringify(this.userData))},clearUserData:function(){this.removeData("appData")},requestTime:function(e){this.Get("http://api.k780.com/",{app:"life.time",appkey:10003,sign:"b59bc3ef6191eb9f747dd4e83c99f2a4",format:"json"},e)}}),cc._RF.pop()},{}],UserInfo:[function(e,t){"use strict";cc._RF.push(t,"a8163NYak5KKq7jz9BgYKYn","UserInfo"),cc.Class({extends:cc.Component,ctor:function(){this.Reset()},Reset:function(){this.live=0,this.score=0,this.stage=1}}),cc._RF.pop()},{}],WeChat:[function(e,t){"use strict";cc._RF.push(t,"bdf9dggdWZPKItzvIY5NsdF","WeChat"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],blastcontrol:[function(e,t){"use strict";cc._RF.push(t,"7bfe8I1MjpFIq+xDwQQmMoc","blastcontrol"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.boxCollision=this.getComponent("cc.PhysicsBoxCollider"),null==this.boxCollision&&(this.boxCollision=this.getComponent("cc.PhysicsChainCollider"))},update:function(){xx.game.InvincibleBomb?"blast"==this.node.group&&(this.node.group="blast2",this.boxCollision.apply()):"blast2"==this.node.group&&(this.node.group="blast",this.boxCollision.apply())}}),cc._RF.pop()},{}],blast:[function(e,t){"use strict";cc._RF.push(t,"3be5c0hR+FOD5U1E/cagmur","blast"),e("ColliderEnum"),e("ItemEnum"),e("ObjectOrder"),cc.Class({extends:cc.Component,properties:{},start:function(){var e=this;this.upRect,this.downRect,this.rightRect,this.leftRect,this.centerRect,this.ctx=cc.find("Canvas/Graphics").getComponent(cc.Graphics),this.scheduleOnce(function(){e.node.destroy()},.6)},_grahpicRect:function(){this.ctx.lineWidth=2,this.ctx.strokeColor=cc.Color.RED,this.ctx.rect(this.downRect.x,this.downRect.y,this.downRect.width,this.downRect.height),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.GREEN,this.ctx.rect(this.centerRect.x,this.centerRect.y,this.centerRect.width,this.centerRect.height),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.GRAY,this.ctx.rect(this.rightRect.x,this.rightRect.y,this.rightRect.width,this.rightRect.height),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.BLUE,this.ctx.rect(this.leftRect.x,this.leftRect.y,this.leftRect.width,this.leftRect.height),this.ctx.stroke(),this.ctx.strokeColor=cc.Color.YELLOW,this.ctx.rect(this.upRect.x,this.upRect.y,this.upRect.width,this.upRect.height),this.ctx.stroke()},_hitCollider:function(){var e=[];return this.upRect&&(e=e.concat(cc.director.getPhysicsManager().testAABB(this.upRect))),this.downRect&&(e=e.concat(cc.director.getPhysicsManager().testAABB(this.downRect))),this.leftRect&&(e=e.concat(cc.director.getPhysicsManager().testAABB(this.leftRect))),this.rightRect&&(e=e.concat(cc.director.getPhysicsManager().testAABB(this.rightRect))),this.centerRect&&(e=e.concat(cc.director.getPhysicsManager().testAABB(this.centerRect))),e},update:function(){var e=this,t=this._hitCollider();t.length>0&&t.forEach(function(t){e._handleConcactCollider(t)})},_handleConcactCollider:function(){},onDestroy:function(){console.log("blast destroy")}}),cc._RF.pop()},{ColliderEnum:"ColliderEnum",ItemEnum:"ItemEnum",ObjectOrder:"ObjectOrder"}],bomb:[function(e,t){"use strict";cc._RF.push(t,"f2f9703QptG8aXUTjzs86c9","bomb");var i=e("ColliderEnum");e("ItemEnum"),e("ObjectOrder"),cc.Class({extends:cc.Component,properties:{prefabs:[cc.Prefab]},onLoad:function(){var e=this;this._maxCount,this.range=1,this.isPause=!1,this.blastPosList=[],this.rgb=this.getComponent(cc.RigidBody),this.circleCollider=this.getComponent("cc.PhysicsBoxCollider"),this.getComponent("cc.PhysicsBoxCollider").tag=i.Bomb,this.getComponent(cc.Animation).play("bomb"),this.time=3.5,this.hasBomb=!1,this.scheduleOnce(function(){xx.game.isBombRemote||e._bomb()},this.time)},init:function(e){this.data=e,this.range=e.level},_toggleSensor:function(e){var t=this;this.scheduleOnce(function(){t.circleCollider.sensor=e,t.circleCollider.apply()},.3)},onEndContact:function(){this.circleCollider.sensor},_bomb:function(){var e=this;this.hasBomb=!0,this.circleCollider.tag=1e4,xx.game.bombs.splice(xx.game.bombs.indexOf(this),1),XX.Audio.playBomb(),this.data.bomb_blast(this.node.position);var t=new cc.Node;this.range=xx.game.bombLevel;var i=this._rayCastAround(this.range);this._createCenterBlast(t),i.forEach(function(i){e._createWrapBlast(t,i.dir,i.pos)}),xx.game.items.addChild(t),this.node.destroy()},_BlastingBomb:function(){var e=this;this.hasBomb=!0,this.circleCollider.tag=1e4,xx.game.bombs.splice(xx.game.bombs.indexOf(this),1),this.node.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){XX.Audio.playBomb(),e.data.bomb_blast(e.node.position);var t=new cc.Node;e.range=xx.game.bombLevel;var i=e._rayCastAround(e.range);e._createCenterBlast(t),i.forEach(function(i){e._createWrapBlast(t,i.dir,i.pos)}),xx.game.items.addChild(t),e.node.destroy()})))},_createCenterBlast:function(t){var o=e("blast");t.addComponent(o);var n=cc.instantiate(this.prefabs[0]);n.position=this.node.position,t.addChild(n),n.getComponent("cc.PhysicsChainCollider").tag=i.Blast;var s=this.node.parent.convertToWorldSpaceAR(n.position);t.getComponent(o).centerRect=new cc.Rect(s.x-4,s.y-4,8,8)},_createWrapBlast:function(e,t,o){var n=this.node.position,s=0,c=o.sub(n).mag()/16;c=Math.round(c);var a=o.x,r=2,l=16,d=o.y,h="",u=e.getComponent("blast");t.equals(cc.v2(0,1))?(s=0,d-=(l=16*c-4)-4,a-=r/2,h="upRect"):t.equals(cc.v2(0,-1))?(s=180,l=16*c-4,d+=-4,a-=r/2,h="downRect"):t.equals(cc.v2(1,0))?(s=90,a-=(r=16*c-4)-4,d-=(l=2)/2,h="rightRect"):t.equals(cc.v2(-1,0))&&(s=270,r=16*c-4,a-=2,d-=(l=2)/2,h="leftRect");for(var p=0;p<c;p++){var m=cc.instantiate(this.prefabs[this.range==c&&p==c-1?1:2]);m.position=n.add(t.scale(cc.v2(16,16).scale(cc.v2(p+1,p+1)))),m.angle=-s,e.addChild(m),m.runAction(cc.sequence(cc.delayTime(.02*p),0==t.x?cc.scaleTo(.1,1.8,1):cc.scaleTo(.1,1,1.8),cc.spawn(cc.tintTo(.1,255,200,200),cc.scaleTo(.1,1)))),m.getComponent("cc.PhysicsBoxCollider").tag=i.Blast}var g=this.node.parent.convertToWorldSpaceAR(cc.v2(a,d));u[h]=new cc.Rect(g.x,g.y,r,l)},_rayCastAround:function(e){for(var t,o=this,n=[],s=this.node.parent.convertToWorldSpaceAR(this.node.position),c=[cc.v2(0,1),cc.v2(1,0),cc.v2(0,-1),cc.v2(-1,0)],a=function(a){t=s.add(c[a].scale(cc.v2(16*e,16*e)));var r=cc.director.getPhysicsManager().rayCast(s,t,cc.RayCastType.All);if(r.sort(function(e,t){var i=e.point.magSqr(),o=t.point.magSqr();return 2!=a&&3!=a||(i=-i,o=-o),i>o?1:i<o?-1:0}),(r=r.filter(function(e){var t=e.collider.tag;return t==i.Wall||t==i.Steel||t==i.Bomb})).length>0){var l=r[0].collider,d=l.node.position,h=c[a].scale(cc.v2(16,16)),u=d.sub(h);u.equals(o.node.position)||n.push({dir:c[a],pos:u}),o._handleConcactCollider(l)}else n.push({dir:c[a],pos:o.node.parent.convertToNodeSpaceAR(t)})},r=0;r<c.length;r++)a(r);return n},_handleConcactCollider:function(e){switch(e.tag){case i.Wall:e.node.getComponent("wall").blastWall();break;case i.Bomb:e.node.getComponent("bomb")._BlastingBomb()}},update:function(){if(this.isPause!=(xx.game.is_game_pause||xx.game.is_game_over)&&(this.isPause=xx.game.is_game_pause||xx.game.is_game_over,this.isPause?(cc.director.getScheduler().pauseTarget(this),this.getComponent(cc.Animation).pause()):(cc.director.getScheduler().resumeTarget(this),this.getComponent(cc.Animation).resume())),!this.isPause&&(0==this.hasBomb&&-1==xx.game.bombs.indexOf(this)&&xx.game.isBombRemote&&xx.game.bombs.push(this),!xx.game.isBombThough)){var e=xx.game.player;if(e&&e.isValid){var t=this.node.getBoundingBoxToWorld(),i=e.getBoundingBoxToWorld();t.intersects(i)||"bomb1"==this.node.group&&(this.node.group="bomb2",this.circleCollider.apply())}}}}),cc._RF.pop()},{ColliderEnum:"ColliderEnum",ItemEnum:"ItemEnum",ObjectOrder:"ObjectOrder",blast:"blast"}],caozuo:[function(e,t){"use strict";cc._RF.push(t,"f8faci+5oFKdIx1Xqgv/Rqh","caozuo"),e("ItemEnum"),cc.Class({extends:cc.Component,properties:{bomb_btn:cc.Node,bomb_control:cc.Node},start:function(){},onClickAddBomb:function(){if(!xx.game.is_game_pause&&!xx.game.is_game_over){var e=xx.game.player;e&&e.isValid&&(e=e.getComponent("player"))._placeBomb()}},onClickBomb:function(){xx.game.bombs.length>0&&xx.game.bombs[0]._bomb()},update:function(){var e=xx.game.player;e&&e.isValid&&(e=e.getComponent("player"),this.bomb_control.active=xx.game.isBombRemote)}}),cc._RF.pop()},{ItemEnum:"ItemEnum"}],daily:[function(e,t){"use strict";cc._RF.push(t,"c61ddNJTb9N1Y7y1XsTpLf8","daily"),cc.Class({extends:cc.Component,properties:{},start:function(){},Get:function(){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){XX.Tools.userData.BombCount++,XX.Tools.userData.Daily=!0,XX.Tools.saveUserData(),XX.Tip("\u70b8\u5f39\u9053\u5177\u589e\u52a0\u4e00\u4e2a"),t.node.destroy()},function(){})},Close:function(){this.node.destroy()}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],direction:[function(e,t){"use strict";cc._RF.push(t,"226dcxS2ghKNZrWR1io5p3L","direction");var i=cc.Enum({up:0,right:1,down:2,left:3,no:4});cc.Class({extends:cc.Component,properties:{diretion_icon:cc.Sprite,up:cc.SpriteFrame,down:cc.SpriteFrame,left:cc.SpriteFrame,right:cc.SpriteFrame,none:cc.SpriteFrame,up_icon:cc.Node,down_icon:cc.Node,left_icon:cc.Node,right_icon:cc.Node},start:function(){this.diretion_icon.spriteFrame=this.none,this.direction=i.no,this.node.parent.on(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){if(!xx.game.is_game_over&&!xx.game.is_game_pause)switch(this.diretion_icon.spriteFrame=this.none,e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:this.direction=i.up;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.direction=i.down;break;case cc.macro.KEY.a:case cc.macro.KEY.left:this.direction=i.left;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.direction=i.right}},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.up:this.direction=i.no;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.direction=i.no;break;case cc.macro.KEY.a:case cc.macro.KEY.left:this.direction=i.no;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.direction=i.no}},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},cbTouchStart:function(e){this.diretion_icon.spriteFrame=this.none,this.direction=i.no;var t=e.getLocation();this.up_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.up:this.down_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.down:this.left_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.left:this.right_icon.getBoundingBoxToWorld().contains(t)&&(this.direction=i.right)},cbTouchMove:function(e){var t=e.getLocation();this.up_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.up:this.down_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.down:this.left_icon.getBoundingBoxToWorld().contains(t)?this.direction=i.left:this.right_icon.getBoundingBoxToWorld().contains(t)&&(this.direction=i.right)},cbTouchEnd:function(){this.diretion_icon.spriteFrame=this.none;var e=xx.game.player;e&&e.isValid&&((e=e.getComponent("player")).dirY=0,e.dirX=0,this.direction=i.no)},cbTouchCancel:function(){this.diretion_icon.spriteFrame=this.none;var e=xx.game.player;e&&e.isValid&&((e=e.getComponent("player")).dirY=0,e.dirX=0,this.direction=i.no)},update:function(){var e=xx.game.player;e&&e.isValid&&(e=e.getComponent("player"),this.direction==i.no?(e.dirY=0,e.dirX=0,this.diretion_icon.spriteFrame=this.none):this.direction==i.up?(this.diretion_icon.spriteFrame=this.up,e.dirX=0,e.dirY=1):this.direction==i.down?(this.diretion_icon.spriteFrame=this.down,e.dirY=-1,e.dirX=0):this.direction==i.left?(this.diretion_icon.spriteFrame=this.left,e.dirX=-1,e.dirY=0):this.direction==i.right&&(this.diretion_icon.spriteFrame=this.right,e.dirX=1,e.dirY=0))}}),cc._RF.pop()},{}],door:[function(e,t){"use strict";cc._RF.push(t,"99c3cpwbtBE/LQRFWcunqa3","door");var i=e("ColliderEnum");cc.Class({extends:cc.Component,properties:{},start:function(){this.is_collider=!1},onBeginContact:function(e,t,o){o.tag==i.Blast||o.tag==i.Player&&0==xx.game.monster_arr.length&&null==xx.game.items.getChildByName("doorwall")&&(console.log("\u6e38\u620f\u7ed3\u675f"),XX.Audio.stopGameBGM(),XX.Audio.playFindDoor(),xx.game.bombs.forEach(function(e){e.destroy()}),xx.game.bombs.splice(0,xx.game.bombs.length),xx.game.bombs=[],XX.UserInfo.live++,XX.Event.emit(XX.Constant.Event.live),this.is_collider=!0)},onEndContact:function(){this.is_collider=!1},nextLevel:function(){var e=cc.instantiate(xx.game.stage_prefab);xx.game.node.addChild(e)},update:function(){var t=this;if(this.is_collider){var i=xx.game.player;if(i&&i.isValid){var o=i.parent.convertToWorldSpaceAR(i.position),n=this.node.parent.convertToWorldSpaceAR(this.node.position);o.sub(n).mag()<2.5&&(this.is_collider=!1,xx.game.is_game_over=!0,XX.UserInfo.stage++,this.scheduleOnce(function(){xx.game.Invincible=!1,xx.game.node.getComponent("time_task").pause();var i=cc.instantiate(xx.game.success_prefab);xx.game.node.addChild(i);var o=i.getComponent("success"),n=new cc.Component.EventHandler;n.target=t,n.component="door",n.handler="nextLevel",o.nextCallBack=n,e("../sdk/Manager").ccManager.RecordEnd()},2))}}}}),cc._RF.pop()},{"../sdk/Manager":"Manager",ColliderEnum:"ColliderEnum"}],game_control:[function(e,t){"use strict";cc._RF.push(t,"f7140NA1PNHBJ5ZhisP+ITk","game_control"),e("ColliderEnum"),e("ItemEnum");var i=e("ObjectOrder");cc.Class({extends:cc.Component,ctor:function(){this.speed=60,this.prop_items=[],this.bombPosList=[],this.bombLevel=1,this.bombCount=1,this.isBombRemote=!1,this.isWallThough=!1,this.isBombThough=!1,this.InvincibleBomb=!1,this.Invincible=!1,this.bombs=[],this.is_back_home=!1},properties:{camera:cc.Camera,items:cc.Node,top_info:cc.Node,map:cc.TiledMap,time_lab:cc.Label,stage_prefab:cc.Prefab,game_over_prefab:cc.Prefab,wall_prefab:cc.Prefab,steel_prefab:cc.Prefab,player_prefab:cc.Prefab,monster_prefab:cc.Prefab,bomb_prefab:cc.Prefab,item_prefab:cc.Prefab,door_prefab:cc.Prefab,score_prefab:cc.Prefab,success_prefab:cc.Prefab,info_bg:cc.Sprite},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,XX.Tools.getUserData()},start:function(){xx.game=this,this.map.node.getComponent(cc.Widget).updateAlignment(),this.items.getComponent(cc.Widget).updateAlignment();var e=cc.instantiate(this.stage_prefab);this.node.addChild(e)},onStart:function(){this.is_game_over=!1,this.is_game_pause=!0,this.monster_arr=[],this.emptyTiles=[],this.clear(),this.initMap(),this.loadLevel(XX.UserInfo.stage);var t=e("time_task");this.node.removeComponent(t),this.node.addComponent(t),XX.Event.emit(XX.Constant.Event.score),XX.Event.emit(XX.Constant.Event.live)},initData:function(){this.speed=60,this.prop_items=[],this.bombPosList=[],this.bombLevel=1,this.bombCount=1,this.isBombRemote=!1,this.isWallThough=!1,this.isBombThough=!1,this.InvincibleBomb=!1,this.bombs=[]},deadData:function(){this.prop_items=[],this.bombPosList=[],this.isBombRemote=!1,this.isWallThough=!1,this.isBombThough=!1,this.InvincibleBomb=!1,this.Invincible=!1,this.bombs=[]},initMap:function(){this.WallLayer=this.map.node.getChildByName("wall").getComponent(cc.TiledLayer);for(var e=this.WallLayer.getLayerSize(),t=[],i=0;i<e.width;i++)for(var o=0;o<e.height;o++){var n=this.WallLayer.getTileGIDAt(i,o);t.push(n),0==n?this.emptyTiles.push(cc.v2(i,o)):t.push(cc.v2(i,o))}for(var s=0;s<t.length;s++){var c=cc.instantiate(this.steel_prefab);c.width=this.map.getTileSize().width,c.height=this.map.getTileSize().height;var a=this.getPositionFromTileCoord(t[s]).add(cc.v2(this.info_bg.node.width,0));c.position=a,c.zIndex=10,this.items.addChild(c)}for(var r=[],l=0;l<3;l++)r.push(cc.v2(l,2)),r.push(cc.v2(l,1));this.emptyTiles=this.emptyTiles.filter(function(e){for(var t=!0,i=0;i<r.length;i++)if(r[i].equals(e)){r.splice(i,1),t=!1;break}return t}),this.player&&this.player.isValid?(this.convertToWorldSpaceAR,this.player.position=this.items.convertToWorldSpaceAR(this.WallLayer.getPositionAt(cc.v2(2,1))).sub(cc.v2(cc.winSize.width/2+this.map.getTileSize().width/2,cc.winSize.height/2+this.items.height/2-this.map.getTileSize().height/2)),this.camera.node.position=cc.Vec2.ZERO):(this.player=cc.instantiate(this.player_prefab),this.node.parent.addChild(this.player),this.player.position=this.items.convertToWorldSpaceAR(this.WallLayer.getPositionAt(cc.v2(2,1))).sub(cc.v2(cc.winSize.width/2+this.map.getTileSize().width/2,cc.winSize.height/2+this.items.height/2-this.map.getTileSize().height/2)),this.camera.node.position=cc.Vec2.ZERO),this.bombPosList=[]},loadLevel:function(e){var t=this,i="level_data/level-"+e;XX.Tools.loadData(i).then(function(e){e=e.json,t.createWall(e.walls),t.createItems(e.items),t.createDoor(e.door),t.createMonster(e.monsters)})},getTileCoordFromPosition:function(e){e=this.node.parent.convertToWorldSpaceAR(e);var t=parseInt(e.x/this.map.getTileSize().width),i=parseInt((this.map.getMapSize().height*this.map.getTileSize().height-e.y)/this.map.getTileSize().height);return cc.v2(t,i)},getPositionFromTileCoord:function(e){var t=this.items.convertToNodeSpaceAR(this.WallLayer.getPositionAt(e));return t.x=t.x+this.map.getTileSize().width/2,t.y=t.y+this.map.getTileSize().height/2,t},getCurrentTiledPosition:function(e){e=this.getTileCoordFromPosition(e);var t=this.items.convertToNodeSpaceAR(this.WallLayer.getPositionAt(e));return t.x=t.x+this.map.getTileSize().width/2,t.y=t.y+this.map.getTileSize().height/2,t},getTilePropertiesByPosition:function(e){var t=this.getTileCoordFromPosition(e),i=this.WallLayer.getTileGIDAt(t);return i>0?{gid:i,properties:GameManager.GetInstance().Map.getPropertiesForGID(i)}:null},createDoor:function(){for(var e=this,t=function(t){var o=e.wallTiles[t],n=e.getPositionFromTileCoord(o).add(cc.v2(e.info_bg.node.width,0));if(!e.itemPosList.some(function(e){return e.equals(n)})){var s=cc.instantiate(e.door_prefab);return s.zIndex=i.Door,s.position=n,e.items.addChild(s),e.items.children.forEach(function(e){e.position.equals(n)&&e.zIndex==i.Wall&&(e.name="doorwall")}),"break"}},o=0;o<this.wallTiles.length&&"break"!==t(o);o++);},createBomb:function(){var e=cc.instantiate(this.bomb_prefab);return this.items.addChild(e),e},createMonster:function(e){for(var t=this,o=[],n=0;n<10;n++)o.push(cc.v2(n,1));this.emptyTiles=this.emptyTiles.filter(function(e){for(var t=!0,i=0;i<o.length;i++)if(o[i].x==e.x){t=!1;break}return t}),e.forEach(function(e){t.randomWall(e.count).forEach(function(o){var n=cc.instantiate(t.monster_prefab);n.position=t.getPositionFromTileCoord(o).add(cc.v2(t.info_bg.node.width,0)),n.getComponent("monster").init(e.speed,e.hp,e.type),n.zIndex=i.Monster,t.items.addChild(n),t.monster_arr.push(n)})})},createItems:function(e){var t=this,o=[];e.forEach(function(e){for(var i;!i;){var n=Math.floor(Math.random()*(t.wallTiles.length-1));i=t.wallTiles[n],-1==o.indexOf(i)?o.push({tile:i,item:e}):i=null}}),o.forEach(function(e){var o=cc.instantiate(t.item_prefab);o.zIndex=i.Item,o.position=t.getPositionFromTileCoord(e.tile).add(cc.v2(t.info_bg.node.width,0)),t.items.addChild(o);var n={enum:e.item};o.getComponent("item").init(n),t.itemPosList.push(o.position)})},createWall:function(e){var t=this;this.wallTiles=this.randomWall(e),this.wallTiles.forEach(function(e){var o=cc.instantiate(t.wall_prefab);o.width=t.map.getTileSize().width,o.height=t.map.getTileSize().height;var n=t.getPositionFromTileCoord(e).add(cc.v2(t.info_bg.node.width,0));o.position=n,o.zIndex=i.Wall,t.items.addChild(o)})},randomWall:function(e){for(var t=[],i=0;i<e;i++){var o=Math.floor(Math.random()*(this.emptyTiles.length-1)),n=this.emptyTiles[o];-1==t.indexOf(n)&&(t.push(n),this.emptyTiles.splice(o,1))}return t},clear:function(){this.items.removeAllChildren(),this.itemPosList=[],this.wallTiles=[]},update:function(){this.is_game_over||this.player&&this.player.isValid&&this.player.x<=848-cc.winSize.width+this.info_bg.node.width/2&&this.player.x>=this.info_bg.node.width/2&&(this.camera.node.x=this.player.x-this.info_bg.node.width/2)},onDestroy:function(){console.log("game control destroy")}}),cc._RF.pop()},{ColliderEnum:"ColliderEnum",ItemEnum:"ItemEnum",ObjectOrder:"ObjectOrder",time_task:"time_task"}],game_over:[function(e,t){"use strict";cc._RF.push(t,"ec210ZmbAdM86dFmXcIcYip","game_over"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){e("../sdk/Manager").ccManager.showBanner(!1)},start:function(){},onClickReplay:function(){XX.Audio.stopAll(),XX.Audio.stopAllMusic(),cc.director.loadScene("home_scene")},onDestroy:function(){e("../sdk/Manager").ccManager.hideBanner(),console.log("game over detroy")}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],home_control:[function(e,t){"use strict";cc._RF.push(t,"63fc7Z/e+RM8KTn3XE4UXyu","home_control");var i=e("./sdk/Enum");cc.Class({extends:cc.Component,properties:{stage_prefab:cc.Prefab,game_over_prefab:cc.Prefab,daily_prefab:cc.Prefab},start:function(){XX.Tools.getUserData();var t=this;XX.Tools.requestTime(function(e){if(e){var i=e.result.timestamp,o=new Date;o.setTime(1e3*i);var n=o.getFullYear(),s=o.getMonth()+1,c=o.getDate();XX.Tools.userData.Year<n?(XX.Tools.userData.Year=n,XX.Tools.userData.Month=s,XX.Tools.userData.Day=c,XX.Tools.userData.Daily=!1,XX.Tools.saveUserData()):XX.Tools.userData.Year==n?XX.Tools.userData.Month<s?(XX.Tools.userData.Month=s,XX.Tools.userData.Day=c,XX.Tools.userData.Daily=!1,XX.Tools.saveUserData()):XX.Tools.userData.Month==s?XX.Tools.userData.Day<c?(XX.Tools.userData.Day=c,XX.Tools.userData.Daily=!1,XX.Tools.saveUserData()):XX.Tools.userData.Day==c?cc.log("\u5b58\u50a8\u662f\u5f53\u524d\u65e5\u671f , \u65e0\u9700\u4efb\u4f55\u64cd\u4f5c"):cc.log("\u5f53\u524d\u65e5\u671f\u9519\u4e71 , \u7f51\u7edc\u5929\u6570 : ",c," \u672c\u5730\u5b58\u50a8\u5e74\u4efd : ",XX.Tools.userData.Day):cc.log("\u5f53\u524d\u65e5\u671f\u9519\u4e71 , \u7f51\u7edc\u6708\u4efd : ",s," \u672c\u5730\u5b58\u50a8\u5e74\u4efd : ",XX.Tools.userData.Month):cc.log("\u5f53\u524d\u65e5\u671f\u9519\u4e71 , \u7f51\u7edc\u5e74\u4efd : ",n," \u672c\u5730\u5b58\u50a8\u5e74\u4efd : ",XX.Tools.userData.Year),XX.Tools.userData.Daily||t.showDaily()}}),XX.Event.offAll(),XX.Audio.playIntro(),e("./sdk/Manager").ccManager.showBanner(!0,!1,i.ccBannerPos.\u5de6\u4e0b\u89d2)},onClickClassModel:function(){XX.Audio.stopAll(),XX.UserInfo.Reset(),cc.director.loadScene("game_scene")},onDestroy:function(){console.log("home destroy")},showDaily:function(){cc.log("\u663e\u793a\u6bcf\u65e5\u767b\u5f55"),cc.find("Canvas").addChild(cc.instantiate(this.daily_prefab))}}),cc._RF.pop()},{"./sdk/Enum":"Enum","./sdk/Manager":"Manager"}],item:[function(e,t){"use strict";cc._RF.push(t,"6fc04wDI7pAwJjuBDZkskN4","item");var i=e("ItemEnum"),o=e("ColliderEnum");cc.Class({extends:cc.Component,properties:{game_atlas:cc.SpriteAtlas},start:function(){this.getComponent("cc.PhysicsCircleCollider").tag=o.Item},init:function(e){this.data=e;var t=this.getComponent(cc.Sprite),o="",n=e.enum;n==i.RunShoes?o="speed":n==i.BombRange?o="bombStretch":n==i.BombCount?o="addBomb":n==i.BombThough?o="bombThough":n==i.NonExploded?o="nonExploded":n==i.BombRemote?o="remoteBomb":n==i.WallThough?o="wallThrough":n==i.Invincible&&(o="questionMark"),t.spriteFrame=this.game_atlas.getSpriteFrame(o)},onBeginContact:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),t=cc.director.getPhysicsManager().rayCast(e.add(cc.Vec2(16,0)),e,cc.RayCastType.All);(t=t.filter(function(e){return e.collider.tag==o.Wall})).length>0||(this.data.enum==i.RunShoes?(xx.game.speed+=4,xx.game.speed>92&&(xx.game.speed=92)):this.data.enum==i.BombRange?(xx.game.bombLevel+=1,xx.game.bombLevel>6&&(xx.game.bombLevel=6)):this.data.enum==i.BombCount?xx.game.bombCount+=1:this.data.enum==i.BombThough?xx.game.isBombThough=!0:this.data.enum==i.NonExploded?xx.game.InvincibleBomb=!0:this.data.enum==i.BombRemote?xx.game.isBombRemote=!0:this.data.enum==i.WallThough?xx.game.isWallThough=!0:this.data.enum==i.Invincible&&(xx.game.Invincible=!0),XX.Audio.playEatProp(),xx.game.prop_items.push(this.data),this.node.destroy())}}),cc._RF.pop()},{ColliderEnum:"ColliderEnum",ItemEnum:"ItemEnum"}],monster:[function(e,t){"use strict";cc._RF.push(t,"f9e1dH3AzZOCqaN+GGDWV5i","monster");var i=e("ColliderEnum");cc.Class({extends:cc.Component,properties:{sf2:cc.SpriteFrame},start:function(){1==this.type?this.checkGird=5:2==this.type&&(this.checkGird=4),this.is_move=!0,this.move_count=0,this.endPos=null,this.directions=[cc.v2(0,1),cc.v2(1,0),cc.v2(0,-1),cc.v2(-1,0)],this.body=this.getComponent(cc.RigidBody),this.ani=this.getComponent(cc.Animation),this.getComponent("cc.PhysicsBoxCollider").tag=i.Monster,this.select_empty=null},_rayCastAround:function(e){for(var t,o=this,n=[],s=this.node.parent.convertToWorldSpaceAR(this.node.position),c=0;c<this.directions.length;c++){t=s.add(this.directions[c].scale(cc.v2(16*e,16*e)));var a=cc.director.getPhysicsManager().rayCast(s,t,cc.RayCastType.Any);(a=a.filter(function(e){var t=e.collider.tag;return t==i.Wall||t==i.Steel||t==i.Monster})).length<=0?n.push({dir:c,pos:this.node.parent.convertToNodeSpaceAR(t)}):function(){var e=null;a.forEach(function(t){t.collider;var i=t.point;o.node.position.sub(i).mag(),e=i}),null!=e&&n.push({dir:c,pos:o.node.parent.convertToNodeSpaceAR(e)})}()}return n},_move:function(){if(1!=this.state){this.move_count=0,this.is_move=!0;var e=this._rayCastAround(this.checkGird);if(this.select_empty=null,e.length>0){var t=e[Math.floor(Math.random()*e.length)];switch(this.select_empty=t,t.dir){case 1:case 2:1==this.type?this.ani.play("lower_monster_01_right"):2==this.type&&this.ani.play("oneal_monster_02_right");break;case 3:case 4:1==this.type?this.ani.play("lower_monster_01_left"):2==this.type&&this.ani.play("oneal_monster_02_left")}var i=this.directions[t.dir].scale(cc.v2(this.speed,this.speed));this.body.linearVelocity=i}}},init:function(e,t,i){this.speed=e,this.hp=t,this.type=i},onBeginContact:function(e,t,o){o.tag==i.Blast&&this.monsterDead()},updateMove:function(){this.move_count++,this.move_count>20&&(this.is_move=!0,this.unschedule(this.updateMove));var e=this.node.parent.convertToWorldSpaceAR(this.node.position),t=parseInt(e.x/xx.game.map.getTileSize().width),i=parseInt((xx.game.map.getMapSize().height*xx.game.map.getTileSize().height-e.y)/xx.game.map.getTileSize().height);if(e=cc.v2(t,i),e=xx.game.getPositionFromTileCoord(e),this.select_empty){var o=this.node.parent.convertToWorldSpaceAR(this.node.position),n=this.select_empty.dir;if(0==n||2==n)if(e.y<o.y){var s=this.node.position;s.y+=1,this.node.position=s}else{var c=this.node.position;c.y-=1,this.node.position=c}else if(1==n||3==n)if(e.x<o.x){var a=this.node.position;a.x+=1,this.node.position=a}else{var r=this.node.position;r.x-=1,this.node.position=r}var l=[];l.push(e),l.push(cc.v2(t+1,i)),l.push(cc.v2(t-1,i)),l.push(cc.v2(t,i-1)),l.push(cc.v2(t,i+1));for(var d=0;d<l.length;d++){var h=xx.game.getPositionFromTileCoord(l[d]);if(Number.parseInt(this.node.x)-h.x==0||Number.parseInt(this.node.y)==h.y==0)return Number.parseInt(this.node.x)-h.x==0&&(this.node.position=h),Number.parseInt(this.node.y)-h.y==0&&(this.node.position=h),this.is_move=!0,void this.unschedule(this.updateMove)}}},update:function(e){if(xx.game.is_game_over||xx.game.is_game_pause)return this.body.linearVelocity=cc.Vec2.ZERO,void this.ani.stop();if(this.node&&this.node.isValid&&this.body&&this.body.isValid){if(0==this.body.linearVelocity.x&&0==this.body.linearVelocity.y&&this.is_move)this.unschedule(this.updateMove),this._move();else{if(0!=this.body.linearVelocity.x&&Math.abs(this.body.linearVelocity.x)<this.speed*(2/3)||0!=this.body.linearVelocity.y&&Math.abs(this.body.linearVelocity.y)<this.speed*(2/3))return this.is_move=!1,this.body.linearVelocity=cc.Vec2.ZERO,this.unschedule(this.updateMove),void this.schedule(this.updateMove,e);if(this.select_empty){var t=this.node.parent.convertToWorldSpaceAR(this.select_empty.pos),i=this.node.parent.convertToWorldSpaceAR(this.node.position);t.sub(i).mag()<=0&&(this.body.linearVelocity=cc.Vec2.ZERO,this.is_move=!0)}}var o=xx.game.player;if(o&&o.isValid){var n=o.parent.convertToWorldSpaceAR(o.position),s=this.node.parent.convertToWorldSpaceAR(this.node.position);if(n.sub(s).mag()<10){var c=o.getComponent("player");if(1==c.state)return;"player"==c.node.group&&c.playerDead()}}}},monsterDead:function(){var e=this;this.state=1,1==this.type?this.ani.play("monster_dead"):(2==this.type&&(this.node.getComponent(cc.Sprite).spriteFrame=this.sf2),this.scheduleOnce(function(){e.node.destroy()},1));var t=this.getComponent(cc.RigidBody);t&&this.node.removeComponent(t);var i=cc.instantiate(xx.game.score_prefab);xx.game.items.addChild(i),i.position=this.node.position,i.getComponent("score").init(this.type),XX.Audio.playMosterDead()},onAniDeadEnd:function(){this.node.destroy()},onDestroy:function(){var e=xx.game.monster_arr,t=e.indexOf(this.node);t>=0&&e.splice(t,1),0==e.length&&XX.Audio.playAllDieAndPause(),console.log("monster destroy")}}),cc._RF.pop()},{ColliderEnum:"ColliderEnum"}],pause:[function(e,t){"use strict";cc._RF.push(t,"fc2b8kwpsNG7ogmXPA+bArL","pause"),cc.Class({extends:cc.Component,properties:{stage_lab:cc.Label,backCallFunc:cc.Component.EventHandler,audio:cc.Toggle,music:cc.Toggle,shareBtn:cc.Button},onLoad:function(){this.stage_lab.string="\u5173\u5361 "+XX.UserInfo.stage,XX.Tools.getUserData(),XX.Tools.userData.Music?this.music.uncheck():this.music.check(),XX.Tools.userData.Audio?this.audio.uncheck():this.audio.check(),e("../sdk/Manager").ccManager.showBanner(!1)},start:function(){},share:function(){var t=e("../sdk/Manager"),i=this;t.ccManager.ShareRecord(function(){xx.game.bombCount++,XX.Tip("\u70b8\u5f39\u653e\u7f6e\u6570\u91cf\u589e\u52a0\u4e00\u9897"),i.shareBtn.node.active=!1})},goMain:function(){XX.Audio.stopAllMusic(),XX.Audio.stopAll(),xx.game.is_back_home=!0,cc.director.loadScene("home_scene")},reusmeGame:function(){e("../sdk/Manager").ccManager.hideBanner(),this.backCallFunc.emit(),this.node.destroy()},MusicSet:function(){this.music.isChecked?XX.Audio.pauseAllMusic():XX.Audio.resumeAllMusic(),XX.Tools.userData.Music=!this.music.isChecked,XX.Tools.saveUserData()},AudioSet:function(){this.audio.isChecked?XX.Audio.pauseAll():XX.Audio.resumeAll(),XX.Tools.userData.Audio=!this.audio.isChecked,XX.Tools.saveUserData()}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],player:[function(e,t){"use strict";cc._RF.push(t,"f793eQX4dZJ8ZGOqEf/6RjZ","player");var i=e("ColliderEnum");e("ItemEnum"),cc.Class({extends:cc.Component,ctor:function(){this.frame_count=0},properties:{WalkSprites:[cc.SpriteFrame],UpWalkSprites:[cc.SpriteFrame],DownWalkSprites:[cc.SpriteFrame],reliveprefab:cc.Prefab},start:function(){this.state=0,this.IsPlayerDead=!1,this.ani=this.getComponent(cc.Animation),this.body=this.getComponent(cc.RigidBody),this.spr=this.getComponent(cc.Sprite),this.getComponent("cc.PhysicsCircleCollider").tag=i.Player,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this)},playerDead:function(){if(this.IsPlayerDead=!0,!xx.game.is_game_pause){xx.game.is_game_pause=!0,e("../sdk/Manager").ccManager.RecordEnd();var t=cc.instantiate(this.reliveprefab);cc.find("Canvas/control").addChild(t);var i=new cc.Component.EventHandler;i.target=this,i.component="player",i.handler="Relive",t.getComponent("relive").reliveCallBack=i;var o=new cc.Component.EventHandler;o.target=this,o.component="player",o.handler="ReliveClose",t.getComponent("relive").closeCallback=o,XX.Audio.pauseAllMusic()}},Relive:function(){var t=this.getComponent("cc.PhysicsCircleCollider");this.node.group="player2",t.apply(),e("../sdk/Manager").ccManager.RecordStart(),xx.game.is_game_pause=!1,XX.Audio.resumeAllMusic();var i=xx.game.node.getComponent("time_task");i.getTime()<10&&i.setTime(50);var o=this;this.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.fadeOut(.2),cc.fadeIn(.2)),10),cc.callFunc(function(){o.IsPlayerDead=!1;var e=o.getComponent("cc.PhysicsCircleCollider");o.node.group="player",e.apply()})))},ReliveClose:function(){this.node.stopAllActions(),this.state=1,this.ani.play("player_dead");var e=this.getComponent(cc.RigidBody),t=this.getComponent("cc.PhysicsCircleCollider");e&&this.node.removeComponent(e),t&&this.node.removeComponent(t),XX.Audio.stopAllMusic(),XX.Audio.playJustDied()},onAniDeadEnd:function(){this.node.destroy()},onBeginContact:function(e,t,o){o.tag==i.Monster||o.tag==i.Blast&&(xx.game.InvincibleBomb||"player2"==this.node.group||this.playerDead())},_playFrame:function(e,t,i){var o=Math.floor(Math.abs(("x"==i?.1*this.node.x:.1*this.node.y)%t.length));e.spriteFrame=t[o]},_onEventBombDestory:function(e){console.log("\u70b8\u5f39\u5df2\u7ecf\u9500\u6bc1..",e);var t=e.detail.pos,i=xx.game.bombPosList.filter(function(e){return e.x==t.x&&e.y==t.y})[0];xx.game.bombPosList.splice(xx.game.bombPosList.indexOf(i),1)},_placeBomb:function(){var e=this;if(!(xx.game.is_game_over||xx.game.is_game_pause||xx.game.bombPosList.length>=xx.game.bombCount||1==this.state)){var t=this.node.parent.convertToWorldSpaceAR(this.node.position),o=cc.director.getPhysicsManager().rayCast(t.add(cc.Vec2(16,0)),t,cc.RayCastType.All);if(!((o=o.filter(function(e){var t=e.collider.tag;return t==i.Bomb||t==i.Steel||t==i.Wall})).length>0))if(xx.game.bombPosList.some(function(e){return e.x==t.x&&e.y==t.y}))console.log("\u70b8\u5f39\u5df2\u7ecf\u653e\u7f6e\u5728\u6b64\u8282\u70b9..");else{var n={level:xx.game.bombLevel,bomb_blast:function(t){xx.game.is_game_over||null==e.state||1==e.state||null==e.node||0==e.node.isValid||null==xx.game.bombPosList||xx.game.bombPosList.splice(xx.game.bombPosList.indexOf(t),1)}},s=xx.game.createBomb();s.getComponent("bomb").init(n),s.position=xx.game.getCurrentTiledPosition(this.node.position),xx.game.bombPosList.push(s.position),XX.Audio.playPutBomb()}}},up:function(){this.dirY=1},down:function(){this.dirY=-1},left:function(){this.dirX=-1},right:function(){this.dirX=1},placeBomb:function(){this._placeBomb()},keyDown:function(e){if(!xx.game.is_game_over&&!xx.game.is_game_pause&&1!=this.state)switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:this.dirX=-1;break;case cc.macro.KEY.d:case cc.macro.KEY.right:this.dirX=1;break;case cc.macro.KEY.w:case cc.macro.KEY.up:this.dirY=1;break;case cc.macro.KEY.s:case cc.macro.KEY.down:this.dirY=-1;break;case cc.macro.KEY.j:case cc.macro.KEY.space:this._placeBomb();break;case cc.macro.KEY.k:xx.game.bombs.length>0&&xx.game.bombs[0]._bomb()}},keyUp:function(e){if(1!=this.state)switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.d:case cc.macro.KEY.left:case cc.macro.KEY.right:this.dirX=0;break;case cc.macro.KEY.w:case cc.macro.KEY.s:case cc.macro.KEY.up:case cc.macro.KEY.down:this.dirY=0}},update:function(){if(xx.game.is_game_over||xx.game.is_game_pause)this.body.linearVelocity=cc.Vec2.ZERO;else{xx.game.Invincible?"player"==this.node.group&&(this.node.group="player2",this.getComponent("cc.PhysicsCircleCollider").apply()):"player2"!=this.node.group||this.IsPlayerDead||(this.node.group="player",this.getComponent("cc.PhysicsCircleCollider").apply()),this.frame_count++,this.dirX?(this._playFrame(this.spr,this.WalkSprites,"x"),this.node.scaleX=this.dirX,this.frame_count%18==0&&XX.Audio.playLeftAndRight()):this.dirY&&(this._playFrame(this.spr,1==this.dirY?this.UpWalkSprites:this.DownWalkSprites,"y"),this.frame_count%18==0&&XX.Audio.playUpAndDown());var e=cc.v2(this.dirX*xx.game.speed,this.dirY*xx.game.speed);this.body.linearVelocity=e}},onDestroy:function(){console.log("player destroy"),xx.game.is_back_home||(this.scheduleOnce(function(){xx.game.is_game_over=!0},2),this.scheduleOnce(function(){if(XX.UserInfo.live<=0){var e=cc.instantiate(xx.game.game_over_prefab);xx.game.node.addChild(e),XX.Audio.playGameOver()}else{xx.game.deadData(),XX.UserInfo.live--;var t=cc.instantiate(xx.game.stage_prefab);xx.game.node.addChild(t),XX.Event.emit(XX.Constant.Event.live)}},4))}}),cc._RF.pop()},{"../sdk/Manager":"Manager",ColliderEnum:"ColliderEnum",ItemEnum:"ItemEnum"}],relive:[function(e,t){"use strict";cc._RF.push(t,"18e14onMIRF25LQuBKv+5Nq","relive"),cc.Class({extends:cc.Component,properties:{reliveCallBack:cc.Component.EventHandler,closeCallback:cc.Component.EventHandler},onLoad:function(){e("../sdk/Manager").ccManager.showBanner(!1)},start:function(){},Relive:function(){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){t.reliveCallBack.emit(),t.node.destroy()},function(){})},Close:function(){this.closeCallback.emit(),this.node.destroy()},onDestroy:function(){e("../sdk/Manager").ccManager.hideBanner()}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],rocker:[function(e,t){"use strict";cc._RF.push(t,"7a02emB7f9Ekr3qlrULfvbJ","rocker"),cc.Class({extends:cc.Component,properties:{playerNodeSpeed:100,Max_r:100},onLoad:function(){this.rockerBg=this.node,this.rockerBg.getComponent(cc.Widget).updateAlignment(),this.joystick=this.node.getChildByName("joystick"),this.dir=cc.v2(0,0),this.node.parent.on(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this)},update:function(){if(!(this.dir.mag()<.5)){var e=180*Math.atan2(this.dir.y,this.dir.x)/Math.PI,t=xx.game.player;t&&t.isValid&&(t=t.getComponent("player"),e>=-30&&e<30?(t.dirX=1,t.dirY=0):e>=60&&e<120?(t.dirX=0,t.dirY=1):e>=150&&e<180||e>=-180&&e<-150?(t.dirX=-1,t.dirY=0):e>=-120&&e<-60&&(t.dirY=-1,t.dirX=0))}},cbTouchStart:function(e){e.getLocation(),this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0)},cbTouchMove:function(e){var t=e.getLocation(),i=this.node.convertToNodeSpaceAR(t),o=i.mag();this.dir.x=i.x/o,this.dir.y=i.y/o,o>this.Max_r&&(i.x=this.Max_r*i.x/o,i.y=this.Max_r*i.y/o),this.joystick.setPosition(i)},cbTouchEnd:function(){this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),console.log("end");var e=xx.game.player;e&&e.isValid&&((e=e.getComponent("player")).dirY=0,e.dirX=0)},cbTouchCancel:function(){this.joystick.setPosition(cc.v2(0,0)),this.dir=cc.v2(0,0),console.log("cancel");var e=xx.game.player;e&&e.isValid&&((e=e.getComponent("player")).dirY=0,e.dirX=0)}}),cc._RF.pop()},{}],score:[function(e,t){"use strict";cc._RF.push(t,"c37fdGiSXhJKoCUFgVhqQbb","score"),cc.Class({extends:cc.Component,properties:{score_1:cc.SpriteFrame,score_2:cc.SpriteFrame,score_3:cc.SpriteFrame,score_4:cc.SpriteFrame,score_5:cc.SpriteFrame},start:function(){var e=this;this.scheduleOnce(function(){e.node.destroy()},2)},init:function(e){var t=this.getComponent(cc.Sprite);1==e?t.spriteFrame=this.score_1:2==e?t.spriteFrame=this.score_2:3==e?t.spriteFrame=this.score_3:4==e?t.spriteFrame=this.score_4:5==e&&(t.spriteFrame=this.score_5),XX.UserInfo.score+=100*Number.parseInt(e),XX.Event.emit(XX.Constant.Event.score)},onDestroy:function(){console.log("score destroy")}}),cc._RF.pop()},{}],setting:[function(e,t){"use strict";cc._RF.push(t,"a7a6b+hiZ5HH7MWHy4+z4I8","setting");var i=cc.Enum({"\u6a2a\u5411\u5411\u5de6\u53d1\u5c04":0,"\u6a2a\u5411\u5411\u53f3\u53d1\u5c04":1,"\u7eb5\u5411\u5411\u4e0a\u53d1\u5c04":2,"\u7eb5\u5411\u5411\u4e0b\u53d1\u5c04":3});cc.Class({extends:cc.Component,properties:{nodes:[cc.Toggle],direction:{type:cc.Enum(i),default:i.\u6a2a\u5411\u5411\u53f3\u53d1\u5c04,displayName:"\u5e03\u5c40\u65b9\u5411"},spaceing:{type:cc.Float,slide:!0,default:35,min:0,max:1080,step:1,displayName:"\u95f4\u8ddd"},time:{type:cc.Float,slide:!0,default:.2,min:0,max:10,step:1,displayName:"\u65f6\u95f4"}},onLoad:function(){this.Open=!1,this.nodes.forEach(function(e){e.node.runAction(cc.fadeOut(0)),e.enabled=!1,e.opacity=0,e.position=cc.Vec2.ZERO}),this.node.getChildByName("Background").zIndex=1},start:function(){},onClick:function(){this.Open=!this.Open,this.node.getChildByName("Background").stopAllActions(),this.Open?this.node.getChildByName("Background").runAction(cc.rotateTo(this.time,0)):this.node.getChildByName("Background").runAction(cc.rotateTo(this.time,360)),this.runSet()},runSet:function(){var e=this,t=this;if(this.Open){var o=0;this.nodes.forEach(function(n){o++;var s=cc.v2(0,0);switch(e.direction){case i.\u6a2a\u5411\u5411\u53f3\u53d1\u5c04:s=cc.v2(e.spaceing*o,0);break;case i.\u6a2a\u5411\u5411\u5de6\u53d1\u5c04:s=cc.v2(-e.spaceing*o,0);break;case i.\u7eb5\u5411\u5411\u4e0a\u53d1\u5c04:s=cc.v2(0,e.spaceing*o);break;case i.\u7eb5\u5411\u5411\u4e0b\u53d1\u5c04:s=cc.v2(0,-e.spaceing*o)}n.node.runAction(cc.spawn(cc.fadeIn(e.time),cc.moveTo(e.time,s),cc.sequence(cc.delayTime(e.time),cc.callFunc(function(){n.enabled=!0},t))))})}else this.nodes.forEach(function(i){i.node.runAction(cc.spawn(cc.fadeOut(e.time),cc.moveTo(e.time,cc.Vec2.ZERO),cc.sequence(cc.delayTime(e.time),cc.callFunc(function(){i.enabled=!1},t))))})}}),cc._RF.pop()},{}],stage:[function(e,t){"use strict";cc._RF.push(t,"c2356Bwma5Bib0e8oR1hf5b","stage"),cc.Class({extends:cc.Component,properties:{stage_lab:cc.Label,desLabel:cc.Label,speed_label:cc.Label,bcount_label:cc.Label,bstrength_label:cc.Label,cbomb_label:cc.Label,invi_label:cc.Label,cwall_label:cc.Label,control_label:cc.Label,random_label:cc.Label},onLoad:function(){var t=this;this.NeedStart=!1,this.stage_lab.string="\u5173\u5361 "+XX.UserInfo.stage,xx.game.onStart(),XX.Audio.playLevelStart(),this.scheduleOnce(function(){t.NeedStart=!0,t.desLabel.node.active=!0,t.desLabel.node.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(2),cc.fadeIn(2))))},3),e("../sdk/Manager").ccManager.showBanner(!1,!1,e("../sdk/Enum").ccBannerPos.\u5de6\u4e0a\u89d2,.1),this.initData()},initData:function(){xx.game.speed<92?XX.Tools.userData.SpeedCount>=1?this.speed_label.string="\u79fb\u901f(Lv."+(xx.game.speed-60)/4+")\n(\u5269\u4f59\u9053\u5177:"+XX.Tools.userData.SpeedCount+")":this.speed_label.string="\u79fb\u901f(Lv."+(xx.game.speed-60)/4+")":this.speed_label.string="\u79fb\u901f(Max)",XX.Tools.userData.BombCount>=1?this.bcount_label.string="\u70b8\u5f39\u6570\u91cf("+xx.game.bombCount+")\n(\u5269\u4f59\u9053\u5177:"+XX.Tools.userData.BombCount+")":this.bcount_label.string="\u70b8\u5f39\u6570\u91cf("+xx.game.bombCount+")",xx.game.bombLevel<6?XX.Tools.userData.StrengthCount>=1?this.bstrength_label.string="\u5a01\u529b(Lv."+xx.game.bombLevel+")\n(\u5269\u4f59\u9053\u5177:"+XX.Tools.userData.StrengthCount+")":this.bstrength_label.string="\u5a01\u529b(Lv."+xx.game.bombLevel+")":this.bstrength_label.string="\u5a01\u529b(Max)",xx.game.isBombRemote?this.control_label.string="\u9065\u63a7(\u5f00)":this.control_label.string="\u9065\u63a7(\u5173)",xx.game.isBombThough?this.cbomb_label.string="\u7a7f\u70b8\u5f39(\u5f00)":this.cbomb_label.string="\u7a7f\u70b8\u5f39(\u5173)",xx.game.isWallThough?this.cwall_label.string="\u7a7f\u5899(\u5f00)":this.cwall_label.string="\u7a7f\u5899(\u5173)",xx.game.InvincibleBomb?this.invi_label.string="\u9632\u7206(\u5f00)":this.invi_label.string="\u9632\u7206(\u5173)",xx.game.Invincible?this.random_label.string="\u65e0\u654c(\u672c\u5173\u6709\u6548--\u5f00)":this.random_label.string="\u65e0\u654c(\u672c\u5173\u6709\u6548--\u5173)"},onDestroy:function(){console.log("stage destroy"),XX.Audio.stopAllMusic(),XX.Audio.playGameBGM(),e("../sdk/Manager").ccManager.hideBanner()},StartGame:function(){this.NeedStart&&(xx.game.is_game_pause=!1,e("../sdk/Manager").ccManager.RecordStart(),this.node.destroy())},WatchAdsBySpeed:function(){if(!(xx.game.speed>=92)){var t=this;XX.Tools.userData.SpeedCount>=1?(XX.Tools.userData.SpeedCount-=1,XX.Tools.saveUserData(),xx.game.speed+=4,xx.game.speed>92?xx.game.speed=92:XX.Tip("\u79fb\u52a8\u901f\u5ea6\u589e\u52a0"),this.initData()):e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.speed+=4,xx.game.speed>92?xx.game.speed=92:XX.Tip("\u79fb\u52a8\u901f\u5ea6\u589e\u52a0"),t.initData()},function(){})}},WatchAdsByBombCount:function(){var t=this;XX.Tools.userData.BombCount>=1?(XX.Tools.userData.BombCount-=1,XX.Tools.saveUserData(),xx.game.bombCount+=1,XX.Tip("\u643a\u5e26\u70b8\u5f39\u6570\u91cf\u589e\u52a01\u679a"),this.initData()):e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.bombCount+=1,XX.Tip("\u643a\u5e26\u70b8\u5f39\u6570\u91cf\u589e\u52a01\u679a"),t.initData()},function(){})},WatchAdsByBombStretch:function(){if(!(xx.game.bombLevel>=6)){var t=this;XX.Tools.userData.StrengthCount>=1?(XX.Tools.userData.StrengthCount-=1,XX.Tools.saveUserData(),xx.game.bombLevel+=1,xx.game.bombLevel>6?xx.game.bombLevel=6:XX.Tip("\u70b8\u5f39\u5a01\u529b\u589e\u52a01\u683c"),this.initData()):e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.bombLevel+=1,xx.game.bombLevel>6?xx.game.bombLevel=6:XX.Tip("\u70b8\u5f39\u5a01\u529b\u589e\u52a01\u683c"),t.initData()},function(){})}},WatchAdsByBombThough:function(){if(!xx.game.isBombThough){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.isBombThough=!0,t.initData(),XX.Tip("\u7a7f\u8d8a\u70b8\u5f39\u529f\u80fd\u5f00\u542f")},function(){})}},WatchAdsByNonExploded:function(){if(!xx.game.InvincibleBomb){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.InvincibleBomb=!0,t.initData(),XX.Tip("\u70b8\u5f39\u4f24\u5bb3\u65e0\u6548\u529f\u80fd\u5f00\u542f")},function(){})}},WatchAdsByRemoteBomb:function(){if(!xx.game.isBombRemote){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.isBombRemote=!0,t.initData(),XX.Tip("\u9065\u63a7\u70b8\u5f39\u529f\u80fd\u5f00\u542f")},function(){})}},WatchAdsByWallThough:function(){if(!xx.game.isWallThough){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.isWallThough=!0,t.initData(),XX.Tip("\u7a7f\u5899\u529f\u80fd\u5f00\u542f")},function(){})}},WatchAdsByRandom:function(){if(!xx.game.Invincible){var t=this;e("../sdk/Manager").ccManager.RewardVideoShow(function(){xx.game.Invincible=!0,t.initData(),XX.Tip("\u672c\u5173\u65e0\u654c\u529f\u80fd\u5f00\u542f")},function(){})}}}),cc._RF.pop()},{"../sdk/Enum":"Enum","../sdk/Manager":"Manager"}],success:[function(e,t){"use strict";cc._RF.push(t,"8f369D8KrtOXb1f2XVhN/mG","success"),cc.Class({extends:cc.Component,properties:{shareBtn:cc.Button,nextCallBack:cc.Component.EventHandler},onLoad:function(){e("../sdk/Manager").ccManager.showBanner(!1)},start:function(){},NextLevel:function(){this.nextCallBack.emit(),this.node.destroy()},Gift:function(){e("../sdk/Manager").ccManager.RewardVideoShow(function(){cc.log("\u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u6210\u529f"),XX.Tools.userData.BombCount+=1,XX.Tools.saveUserData(),XX.Tip("\u70b8\u5f39\u9053\u5177\u589e\u52a0\u4e00\u4e2a")},function(){cc.log("\u6fc0\u52b1\u89c6\u9891\u5931\u8d25!!!")})},Share:function(){var t=e("../sdk/Manager"),i=this;t.ccManager.ShareRecord(function(){xx.game.bombCount++,XX.Tip("\u70b8\u5f39\u653e\u7f6e\u6570\u91cf\u589e\u52a0\u4e00\u9897"),i.shareBtn.node.active=!1})},onDestroy:function(){cc.log("Success Destroy"),e("../sdk/Manager").ccManager.hideBanner()}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],time_task:[function(e,t){"use strict";cc._RF.push(t,"d7ec4WJeF9GV60if9jYev//","time_task"),cc.Class({extends:cc.Component,start:function(){this.time=200,xx.game.time_lab.string=this.time,this.resume()},reset:function(){this.time=200,this.pause(),this.resume()},addTime:function(e){this.time+=e,this.pause(),this.resume()},setTime:function(e){this.time=e,this.pause(),this.resume()},getTime:function(){return this.time},pause:function(){this.unschedule(this.task)},resume:function(){this.schedule(this.task,1)},task:function(){if(!xx.game.is_game_pause&&(this.time--,xx.game.time_lab.string=this.time,this.time<=0)){console.log("\u65f6\u95f4\u5230"),this.pause();var e=xx.game.player;e&&e.isValid&&(e=e.getComponent("player")).playerDead()}},onDestroy:function(){console.log("time task destroy")}}),cc._RF.pop()},{}],tip:[function(e,t){"use strict";cc._RF.push(t,"7a171+IbxBDWr/4ZaMIflUz","tip"),cc.Class({extends:cc.Component,properties:{bgDraw:cc.Graphics,text:cc.Label},start:function(){var e=this;this.node.zIndex=1e3;var t=cc.winSize.height/10/this.node.height;this.node.scale=t,this.node.x=0,this.node.y=3*-cc.winSize.height/8,this.node.runAction(cc.sequence(cc.fadeOut(0),cc.fadeIn(.3),cc.delayTime(2),cc.fadeOut(.3),cc.callFunc(function(){e.node.destroy()},this)))},showToast:function(e){this.drawRect(),this.text.string=e},drawRect:function(){var e=this.text.node.width*this.text.node.scale+40,t=this.text.node.height*this.text.node.scale+20;this.bgDraw.roundRect(-e/2,-t/2,e,t,10),this.bgDraw.fill()},update:function(){this.bgDraw.clear(),this.drawRect()},onDestroy:function(){cc.log("Tip\u9500\u6bc1")}}),cc._RF.pop()},{}],top_info:[function(e,t){"use strict";cc._RF.push(t,"a41f4YgzCxGEZUsYKymUkhu","top_info"),cc.Class({extends:cc.Component,properties:{score_lab:cc.Label,live_lab:cc.Label,pause:cc.Sprite,pause_normal:cc.SpriteFrame,pause_zanting:cc.SpriteFrame,pause_prefeb:cc.Prefab},start:function(){var e=this;XX.Event.on(XX.Constant.Event.score,function(){e.score_lab.string=0==XX.UserInfo.score?"00":XX.UserInfo.score},this),XX.Event.on(XX.Constant.Event.live,function(){e.live_lab.string=XX.UserInfo.live},this)},onClickPause:function(){if(XX.Audio.playAllDieAndPause(),xx.game.is_game_pause=!xx.game.is_game_pause,xx.game.is_game_pause){var t=e("../sdk/Manager");t.ccManager.InterstitialAdShow(),this.pause.spriteFrame=this.pause_zanting;var i=cc.instantiate(this.pause_prefeb);cc.find("Canvas/control").addChild(i);var o=new cc.Component.EventHandler;o.target=this,o.component="top_info",o.handler="onClickPause",i.getComponent("pause").backCallFunc=o,t.ccManager.RecordEnd()}else this.pause.spriteFrame=this.pause_normal,e("../sdk/Manager").ccManager.RecordStart()}}),cc._RF.pop()},{"../sdk/Manager":"Manager"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"87e63DAZuVA94qH5Foj3ZDg","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],video_recording:[function(e,t){"use strict";cc._RF.push(t,"590feTj5EFByJncLCLF08CQ","video_recording");var i=e("Config");function o(){}o.video_recording_start=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(i.videoRecordingState=1,i.videoIsExist=0,i.video_recorder=wx.getGameRecorderManager(),i.videoStartTime=Date.parse(new Date),i.video_recorder.onStart(function(e){console.log("\u5f55\u5c4f\u5f00\u59cb"),console.log(e)}),i.video_recorder.start({duration:120}),i.video_recorder.onStop(function(e){console.log("aaaaaaa"),console.log(e),console.log(e.videoPath),i.videoRecordingState=2,i.videoPath=e.videoPath}),i.video_recorder.onError(function(e){console.log("\u5f55\u5c4ferror",e)}))},o.video_recording_ing=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(console.log("\u5f55\u5c4f\u7ed3\u675f"),i.video_recorder&&(this.endTime=Date.parse(new Date),(this.endTime-i.videoStartTime)/1e3<=3?(i.videoIsExist=1,i.shareVideoTips=1):i.videoIsExist=0,i.videoRecordingState=2,i.video_recorder.stop()))},o.video_recording_share=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&(i.videoRecordingState=3,console.log("\u5f55\u5c4f\u5206\u4eab"),tt.shareAppMessage({channel:"video",title:"#\u75af\u72c2\u5c0f\u8001\u9f20#\uff0c\u5f00\u542f\u5976\u916a\u7684\u5192\u9669\u4e4b\u65c5",imageUrl:"4blkebroskpc38k9l4",query:"",extra:{videoPath:i.videoPath,videoTopics:["\u5c0f\u8001\u9f20","\u75af\u72c2\u5c0f\u8001\u9f20"],createChallenge:!0},success:function(){i.shareVideoTips=2,console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),i.shareVideoState=1},fail:function(){i.shareVideoTips=3,console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}}))},o.recording_share=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&tt.shareAppMessage(function(){return{title:"#\u75af\u72c2\u5c0f\u8001\u9f20#\uff0c\u5f00\u542f\u5976\u916a\u7684\u5192\u9669\u4e4b\u65c5",imageUrlId:"4blkebroskpc38k9l4",success:function(e){console.log(e)},fail:function(e){console.log(e)}}})},o.incentive_reward_video_init=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&null==i.videoAd&&(i.videoAd=tt.createRewardedVideoAd({adUnitId:"385u34fanlr1dcf0fk"}),i.videoAd.onClose(function(t){console.log("videoAd.onClose res.isEnded = "+t.isEnded),1==t.isEnded&&(console.log("\u89c6\u9891\u5e7f\u544a\u7ed3\u675f\u56de\u8c03"),e())}))},o.incentive_reward_video_show=function(e){i.videoAd.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){e(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),i.videoAd.load().then(function(){return console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),i.videoAd.show()})})},t.exports=o,cc._RF.pop()},{Config:"Config"}],wall:[function(e,t){"use strict";cc._RF.push(t,"f7280m9KY9L5oAY5dN3HdkJ","wall"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.BoxCollision=this.getComponent("cc.PhysicsBoxCollider")},start:function(){this.ani=this.getComponent(cc.Animation)},blastWall:function(){this.BoxCollision.tag=1e4,0==XX.Tools.randomInt(0,1)?this.ani.play("wall_dead"):this.ani.play("wall_dead_1")},onEventAniWallDeadEnd:function(){this.node.destroy()},onDestroy:function(){console.log("wall destroy")},update:function(){xx.game.isWallThough?"wall"==this.node.group&&(this.node.group="wall2",this.BoxCollision.apply()):"wall2"==this.node.group&&(this.node.group="wall",this.BoxCollision.apply())}}),cc._RF.pop()},{}]},{},["PolygonMask","Test","Audio","Constant","Event","PersistRootNode","Tools","UserInfo","ColliderEnum","ItemEnum","ObjectOrder","QQ","WeChat","blast","blastcontrol","bomb","caozuo","direction","door","item","monster","player","rocker","time_task","top_info","wall","game_control","home_control","Config","ConstantVar","Enum","Manager","video_recording","daily","game_over","pause","relive","score","setting","stage","success","tip","use_v2.1-2.2.1_cc.Toggle_event"]);